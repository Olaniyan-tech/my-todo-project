{% extends "todo/main.html" %}
{% load widget_tweaks %}

{% block content %}

{% if not request.user.is_authenticated %}
<div class="d-flex justify-content-center align-items-center" style="min-height: calc(100vh - 56px);">
  <div class="card shadow-lg p-5" style="width: 450px; border-radius: 16px; background: rgba(255,255,255,0.1);">
      
      <!-- Page Title -->
      <h2 class="text-center mb-4" style="font-weight: bold;">Create an Account</h2>

      <!-- Registration Form -->
      <form method="POST">
          {% csrf_token %}
          
          <!-- Username -->
          <div class="form-group">
              {{ form.username.label_tag }}
              {{ form.username|add_class:"form-control"|attr:"placeholder:Enter your username" }}
              {% for error in form.username.errors %}
                  <div class="text-danger small">{{ error }}</div>
              {% endfor %}
          </div>

          <!-- Email -->
          <div class="form-group">
              {{ form.email.label_tag }}
              {{ form.email|add_class:"form-control"|attr:"placeholder:Enter your email" }}
              {% for error in form.email.errors %}
                  <div class="text-danger small">{{ error }}</div>
              {% endfor %}
          </div>

          <!-- Password -->
          <div class="form-group">
              {{ form.password1.label_tag }}
              {{ form.password1|add_class:"form-control"|attr:"placeholder:Enter password" }}
              {% for error in form.password1.errors %}
                  <div class="text-danger small">{{ error }}</div>
              {% endfor %}
          </div>

          <!-- Confirm Password -->
          <div class="form-group">
              {{ form.password2.label_tag }}
              {{ form.password2|add_class:"form-control"|attr:"placeholder:Confirm password" }}
              {% for error in form.password2.errors %}
                  <div class="text-danger small">{{ error }}</div>
              {% endfor %}
          </div>

          {% if form.non_field_errors %}
              {% for error in form.non_field_errors %}
                  <div class="text-danger mb-3">{{ error }}</div>
              {% endfor %}
          {% endif %}

          <!-- Submit Button -->
          <button type="submit" class="btn btn-success btn-block mt-3" style="border-radius: 25px; font-weight: bold;">
              Register
          </button>
      </form>

      <!-- Extra Links -->
      <div class="mt-3 text-center">
          <p class="mb-0">Already have an account? 
              <a href="{% url 'login' %}" class="text-warning font-weight-bold">Log In</a>
          </p>
      </div>
  </div>
</div>
{% else %}
<div style="margin-top: 10px; margin-left: 10px;">
    <strong style="margin-left: 20px;">You are already logged in and you cannot re-register. Would you like to <a href="{% url 'logout' %}" class="btn btn-danger" >Log Out</a></strong>
</div>
{% endif %}
{% endblock %}
